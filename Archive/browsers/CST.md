## 쿠키, 세션, 토큰에 관하여

http 통신은 stateless 한 특징 때문에 사용자의 주고받은 개별 통신에 대한 정보를 저장하지 않는다.
예를 들어 '누가' 로그인 중인지 상태를 기억하기 위해 쿠키, 세션, 토큰을 사용한다.

> **HTTP**
>
> _1. Connectionless Protocol (비연결 지향)_ > _2. Stateless Protocol (상태정보 유지 안함)_

### 쿠키

**쿠키는 공개 가능한 정보를 사용자의 브라우저에 저장시킨다.**

- 서버는 클라이언트의 로그인 요청에 대한 응답을 작성할 때, 클라이언트 측에 저장하고 싶은 정보를 응답 헤더의 `set-cookie` 에 담는다.
- 이 후 클라이언트가 재요청 할 때마다 저장된 쿠키를 요청 헤더의 `cookie` 에 담아 보낸다.
- 서버는 쿠키에 담긴 정보를 바탕으로 해당 요청의 클라이언트가 누군지 식별할 수 있다.

### 세션

세션은 비밀번호와 같은 인증 정보를 쿠키에 저장하지 않고 대신에 사용자의 식별자인 `session id` 를 저장한다. 서버에는 인증 정보와 더불어 이 ID에 해당하는 사용자의 정보를 저장한다.

세션은 서버에 저장하기 때문에 사용자가 수백, 수천 으로 늘어난다면 해당 유저의 정보를 찾고 데이터 매칭에 오랜 시간이 걸리면서 서버에 부하가 가해지게 된다.

### 토큰 (JWT)

> Authentication : 인증 | 내가 누구인지 증명하는 것
> Authorizaton : 인가 | 사용자가 맞는지 판별하는 것

JWT 의 이점

1. More Compact : JSON 으로 인코딩하기 때문에, XML 로 인코딩하는 SAML 토큰보다 작다.
2. More Secure : JWT 는 공개키와 개인키를 나누어 서명이 가능하다. HMAC 암호 알고리즘을 사용하여 암호화된 설정도 가능하다.
3. More Common : JSON 의 object 는 일반적인 프로그래밍 언어이기 때문에 접근성이 좋다.
4. Easier to process : JWT 는 인터넷 규모로 사용되어 모바일에서 처리하기 더 쉽다는 것을 의미한다.

#### 토큰의 구조

토큰은 헤더 (Header), 페이로드(payload), 서명()
