## 쿠키와 세션

### 쿠키와 세션을 쓰는 이유

HTTP 는 항상 연결되어있는 것이 아닌 필요할 때마다 요청을 보내고 응답을 받는 비연결성이라는 특징을 갖고 있다.

이는 클라이언트가 응답을 받으면 서버는 접속을 끊는다는 것인데, 연결이 끝나면 상태 정보가 유지되지 않는 특성이 있다.

```
로그인을 한 뒤, 다른 도메인으로 이동했다가 기존 사이트로 돌아오면 로그인 정보가 유지되지 않는다는 것
```

이렇게 유지되지 않는 로그인 정보를 유지하기 위한 방법이 쿠키와 세션이다.

### 쿠키

HTTP 의 일종으로 사용자가 어떠한 웹사이트를 방문할 경우, 그 사이트가 사용하고 있는 서버에서 사용자의 컴퓨터에 저장하는 작은 기록 정보 파일이다.

HTTP 에서 클라이언트의 상태 정보를 클라이언트의 PC에 저장하였다가 필요시 정보를 참조하거나 재사용할 수 있다.

#### 쿠키의 특징

- 이름, 값, 만료일, 경로 정보로 구성되어 있다.
- 클라이언트에 총 300개의 쿠키를 저장할 수 있다.
- 하나의 도메인 당 20개의 쿠키를 가질 수 있다.
- 하나의 쿠키는 4KB(= 4096byte)까지 저장 가능하다.

#### 쿠키의 동작 순서

![](https://github.com/junh0328/prepare_frontend_interview/raw/main/cs_images/4.jpg)

1. 클라이언트가 페이지를 요청한다. (사용자가 웹사이트 접근) 웹 서버는 쿠키를 생성한다.
2. 생성한 쿠키에 정보를 담아 HTTP 화면을 돌려줄 때, 같이 클라이언트에게 돌려준다.
3. 넘겨 받은 쿠키는 클라이언트가 가지고 있다가(로컬 PC에 저장) 다시 서버에 요청할 때 요청과 함께 쿠키를 전송한다.
4. 동일 사이트 재방문 시 클라이언트의 PC에 해당 쿠키가 있는 경우, 요청 페이지와 함께 쿠키를 전송한다.

#### 쿠키의 약점

브라우저 단에 저장되므로 보안에 약할 수 있다.

### 세션

HTTP 세션이란 클라이언트가 웹서버에 연결된 순간부터 웹 브라우저를 닫아 서버와의 HTTP 통신을 끝낼 때 까지의 기간이다.

하지만 보통 세션이라고 말할 때에는 서버에 세션에 대한 정보(세션 상태, 클라이언트 상태, 세션 데이터 등)를 저장해 놓고 세션 쿠키(고유한 세션 ID 값) 를 클라이언트에게 주어 서버가 클라이언트를 식별할 수 있도록 하는 방식자체를 의미하는 경우가 많다.

#### 세션의 특징

- 따로 용량의 제한이 없다. (서버의 능력에 따라 다르다.)
- 서버에 세션 객체를 생성하며 각 클라이언트마다 고유한 세션 ID 값을 부여한다.
- 쿠키를 사용하여 세션 ID 값을 클라이언트에 보낸다.
- 웹 브라우저가 종료되면 세션 쿠키는 삭제된다.

#### 세션의 동작 방식

![](https://github.com/junh0328/prepare_frontend_interview/raw/main/cs_images/5.jpg)

1. 클라이언트 페이지가 요청한다.
2. 서버가 클라이언트마다 개별의 세션 ID를 부여한다.
3. 클라이언트는 요청할 때마다 세션 ID를 서버에 전달한다.
4. 서버는 받은 세션 ID로 클라이언트 정보를 가져와 활용한다.

### 쿠키와 세션의 차이

1. 저장 위치

- 쿠키: 클라이언트에 파일로 저장되어 있다.
- 세션: 서버에 저장되어 있다.

2. 보안

- 쿠키: 클라이언트의 브라우저 로컬에 저장되기 때문에 변질되거나 HTTP 요청 시에 이를 갈취 당할 수 있어서 보안에 취약하다.
- 세션: 쿠키를 이용해서 세션 ID만 저장하고 그것으로 구분해서 서버에서 처리하기 때문에 비교적으로 안전하다.

3. 라이프 사이클

- 쿠키: 만료시간을 있지만 파일로 저장되기 때문에 브라우저를 종료해도 계속해서 정보가 남아있다. 만료기간에 따라 상대적으로 넉넉하게 쿠키를 삭제할 때까지 유지된다.

- 세션: 만료기간을 정할 수는 있지만 브라우저가 종료되면 그에 상관없이 삭제된다.

4. 속도

- 쿠키: 쿠키에 정보가 있기 때문에 서버에 요청 시 속도가 빠르다.
- 세션: 정보가 서버에 있기 때문에 처리가 요구되어 비교적으로 느리다.
